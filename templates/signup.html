<!DOCTYPE html>
<html>

<head>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
    href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter:wght@400;500;700;900" />
  <title>Sign Up</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>

<body class="bg-white font-sans">
  <div class="min-h-screen flex flex-col justify-center items-center">
    <div class="w-full max-w-md p-8 border border-gray-200 rounded-lg shadow-md">
      <h2 class="text-2xl font-bold text-center mb-6">Create Your Account</h2>

      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="mb-3 p-2 rounded
            {% if category=='success' %}bg-green-200 text-green-800
            {% elif category=='error' %}bg-red-200 text-red-800
            {% elif category=='info' %}bg-blue-100 text-blue-800
            {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('signup') }}" class="space-y-4">

        <!-- Roll Number -->
        <div>
          <input type="text" name="roll_no" placeholder="Roll Number" required
            class="w-full border rounded-lg px-4 py-3 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400" />
        </div>

        <!-- Username selection -->
        {% if usernames %}
        <div>
          <label for="username" class="block mb-1 text-sm font-medium text-gray-700">Select your username</label>
          <select name="username" id="username"
            class="w-full border rounded-lg px-4 py-3 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
            {% for user in usernames %}
              <option value="{{ user }}">{{ user }}</option>
            {% endfor %}
          </select>
        </div>
        {% else %}
        <div>
          <input type="text" name="username" placeholder="Username" required
            class="w-full border rounded-lg px-4 py-3 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400" />
        </div>
        {% endif %}

        <!-- Password input -->
        <div>
          <input type="password" name="password" placeholder="Password" required
            class="w-full border rounded-lg px-4 py-3 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400" />
        </div>

        <!-- Submit button -->
        <button type="submit"
          class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors">
          Sign Up
        </button>

        <!-- Login link -->
        <p class="text-center text-sm text-gray-500 mt-2">
          Already have an account?
          <a href="{{ url_for('login') }}" class="underline text-blue-600">Log in</a>
        </p>

      </form>
    </div>
  </div>
</body>

</html>
