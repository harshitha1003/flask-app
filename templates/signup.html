<!DOCTYPE html>
<html>

<head>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
    href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter:wght@400;500;700;900&amp;family=Noto+Sans:wght@400;500;700;900" />
  <title>Sign Up</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
</head>

<body class="bg-white font-sans">
  <div class="min-h-screen flex flex-col justify-center items-center">
    <div class="w-full max-w-md p-8 border border-gray-200 rounded-lg shadow-md">
      <h2 class="text-2xl font-bold text-center mb-6">Sign Up</h2>

      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      {% for category, message in messages %}
      <div
        class="mb-3 p-2 rounded {{ 'bg-green-200 text-green-800' if category=='success' else 'bg-red-200 text-red-800' }}">
        {{ message }}
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('signup') }}" class="space-y-4">

        <!-- Roll Number -->
        <div>
          <label class="block mb-1 font-medium">Roll Number</label>
          <input type="text" name="roll_no" placeholder="Enter your roll number" required
            class="w-full border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400" />
        </div>

        <!-- Username Dropdown -->
        <div>
          <label class="block mb-1 font-medium">Username</label>
          <select name="username" required class="form-input max-h-40 overflow-y-auto">
            <option value="" disabled selected>Select a username</option>
            {% for user in available_users %}
            <option value="{{ user['username'] }}">{{ user['username'] }}</option>
            {% endfor %}
          </select>

        </div>

        <!-- Password -->
        <div>
          <label class="block mb-1 font-medium">Password</label>
          <input type="password" name="password" placeholder="Set a password" required
            class="w-full border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400" />
        </div>

        <!-- Submit Button -->
        <button type="submit"
          class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors">
          Sign Up
        </button>

        <!-- Login link -->
        <p class="text-center text-sm text-gray-500 mt-2">
          Already have an account?
          <a href="{{ url_for('login') }}" class="underline text-blue-600">Sign in</a>
        </p>

      </form>
    </div>
  </div>
</body>

</html>
